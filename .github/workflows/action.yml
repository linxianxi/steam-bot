name: Puppeteer Steam Scraper

# é€šè¿‡ API æ‰‹åŠ¨è§¦å‘ï¼ˆå¤–éƒ¨ cron ç­‰è°ƒåº¦å™¨ï¼‰
on:
  workflow_dispatch:

jobs:
  scrape:
    runs-on: ubuntu-latest

    steps:
      # 1) æ£€å‡ºä»“åº“ä»£ç 
      - name: Checkout code
        uses: actions/checkout@v5

      # 2) å®‰è£… Node.js 20 å¹¶å¯ç”¨ Yarn ç¼“å­˜
      - name: Setup Node.js 20 with Yarn cache
        uses: actions/setup-node@v4
        with:
          node-version: "20"
          cache: "yarn"
          # å¦‚æœä½ çš„ yarn.lock ä¸åœ¨æ ¹ç›®å½•ï¼Œéœ€è¦æŒ‡å®š cache-dependency-path
          cache-dependency-path: "yarn.lock"

      # 3) å®‰è£…ä¾èµ–
      - name: Install dependencies
        run: yarn install --immutable

      # 5) æ‰§è¡Œè„šæœ¬
      - name: Run Puppeteer script
        run: yarn start

      # 6) è¿è¡Œå®Œæˆ
      - name: Done
        run: echo "ğŸš€ Puppeteer scraping finished"
